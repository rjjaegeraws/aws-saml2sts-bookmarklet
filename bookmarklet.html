<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html,body,div { margin: 0; padding: 0; font: normal 16px/24px Helvetica Neue, Helvetica, sans-serif; color: #333; }
      #main { max-width: 630px; margin: 3em auto; }
      .bookmarklet { display: inline-block; padding: .5em 1em; color: #fff; background: #50dcf3; border-radius: 4px; text-decoration: none; }
      a { color: #50dcf3; }
      .dim { color: #999; }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>AWS Temporary Credentials Bookmarklet</h1>
      <p>
        Drag this button to your bookmarks bar to save it as a bookmarklet:
      </p>
      <p>
        <a class="bookmarklet" href="javascript:(function()%7B%22use%20strict%22%3Bvar%20link%3Bdocument.getElementById(%22bookmarklet__style_43b5427%22)%7C%7C((link%3Ddocument.createElement(%22link%22)).id%3D%22bookmarklet__style_43b5427%22%2Clink.rel%3D%22stylesheet%22%2Clink.href%3D%22https%3A%2F%2Fcode.jquery.com%2Fui%2F1.12.1%2Fthemes%2Fbase%2Fjquery-ui.min.css%22%2Cdocument.body.appendChild(link))%3B%22use%20strict%22%3Bfunction%20callback()%7Bfunction%20t()%7Bfunction%20t()%7Bvar%20i%3DjQuery.noConflict()%3Bi(document).ready(function()%7Bi(%22fieldset%22).before('%3Cdiv%20id%3D%22dialog%22%20title%3D%22AWS%20Credentials%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3ECopy%20and%20paste%20the%20following%20commands%20into%20your%20shell%20to%20set%20up%20your%20AWS%20CLI%20environment%20variables.%3C%2Fp%3E%20%5Ct%5Ct%5Ct%5Ct%3Cpre%20id%3D%22msg%22%3E%3C%2Fpre%3E%5Ct%5Ct%5Ct%5Ct%3Cdiv%20id%3D%22copyMacLinux%22%20style%3D%22display%3Anone%3B%22%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Ch3%3ELinux%20or%20macOS%3C%2Fh3%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Cpre%20style%3D%22white-space%3A%20pre-wrap%3Bword-wrap%3A%20break-word%3Bpadding%3A%201rem%3B%22%3ELoading...%3C%2Fpre%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Cbutton%20type%3D%22button%22%20class%3D%22click-to-copy%22%3EClick%20to%20copy%3C%2Fbutton%3E%20%5Ct%5Ct%5Ct%5Ct%3C%2Fdiv%3E%5Ct%5Ct%5Ct%5Ct%3Cdiv%20id%3D%22copyPowershell%22%20style%3D%22display%3Anone%3B%22%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Ch3%3EPowershell%3C%2Fh3%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Cpre%20style%3D%22white-space%3A%20pre-wrap%3Bword-wrap%3A%20break-word%3Bpadding%3A%201rem%3B%22%3ELoading...%3C%2Fpre%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Cbutton%20type%3D%22button%22%20class%3D%22click-to-copy%22%3EClick%20to%20copy%3C%2Fbutton%3E%20%5Ct%5Ct%5Ct%5Ct%3C%2Fdiv%3E%5Ct%5Ct%5Ct%5Ct%3Cdiv%20id%3D%22copyCMDEnv%22%20style%3D%22display%3Anone%3B%22%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Ch3%3EWindows%20Command%20Prompt%3C%2Fh3%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Cpre%20style%3D%22white-space%3A%20pre-wrap%3Bword-wrap%3A%20break-word%3Bpadding%3A%201rem%3B%22%3ELoading...%3C%2Fpre%3E%5Ct%5Ct%5Ct%5Ct%20%20%3Cbutton%20type%3D%22button%22%20class%3D%22click-to-copy%22%3EClick%20to%20copy%3C%2Fbutton%3E%20%5Ct%5Ct%5Ct%5Ct%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E')%2Ci(%22%23dialog%22).dialog(%7BautoOpen%3A!1%2Cwidth%3A%22600px%22%7D)%2Ci(%22div.saml-role%22).each(function(t%2Ce)%7Bi(%22label%22%2Ce).before('%3Cbutton%20type%3D%22button%22%20class%3D%22showTempCredsButton%22%20style%3D%22margin-right%3A%2010px%3B%22%20id%3D%22showTempCreds_'%2Bt%2B'%22%3EShow%20Temporary%20Credentials%3C%2Fbutton%3E')%7D)%3Bvar%20s%3Di('%23saml_form%20input%5Bname%3D%22SAMLResponse%22%5D').first().val()%3Bi(%22button.showTempCredsButton%22).click(function(t)%7Bi(%22%23dialog%22).dialog(%22open%22)%2Ci(%22%23dialog%20pre%22).html(%22Loading...%22)%3Bvar%20e%3Di(%22input%22%2C%24(this).parent()).first().val()%2Co%3Datob(s)%2Ca%3Dnew%20RegExp(%22%3E(%3F%3Cprovider%3Earn%3Aaws%3Aiam%3A%3A%5C%5Cd%2B%3Asaml-provider%2F%5C%5CS%2B)%2C%22%2Be%2B%22%3C%22)%2Cn%3Do.match(a).groups.provider%2Cd%3Dnew%20AWS.STS%2Cr%3D%7BDurationSeconds%3A3600%2CPrincipalArn%3An%2CRoleArn%3Ae%2CSAMLAssertion%3As%7D%3Bd.assumeRoleWithSAML(r%2Cfunction(t%2Ce)%7Bvar%20o%2Ca%2Cn%2Cd%3Bt%3F(console.log(t%2Ct.stack)%2Ci(%22%23dialog%20pre%22).html(%22Error%3A%20%22%2Bt.message))%3A(i(%22%23dialog%20%23msg%22).html(%22%22)%2Co%3De.Credentials.AccessKeyId%2Ca%3De.Credentials.SecretAccessKey%2Cn%3De.Credentials.SessionToken%2C(d%3D%5B%5D).push(%7Bcmd%3A%22export%20%22%2CjqId%3A%22%23copyMacLinux%22%7D)%2Cd.push(%7Bcmd%3A%22%24Env%3A%22%2CjqId%3A%22%23copyPowershell%22%7D)%2Cd.push(%7Bcmd%3A%22set%20%22%2CjqId%3A%22%23copyCMDEnv%22%7D)%2Cd.forEach(function(t)%7Bvar%20e%3Dt.cmd%2B'AWS_ACCESS_KEY_ID%3D%22'%2Bo%2B'%22%20%5Cn'%2Bt.cmd%2B'AWS_SECRET_ACCESS_KEY%3D%22'%2Ba%2B'%22%20%5Cn'%2Bt.cmd%2B'AWS_SESSION_TOKEN%3D%22'%2Bn%2B'%22%20%5Cn'%2Bt.cmd%2B%22AWS_DEFAULT_REGION%3Dca-central-1%20%5Cn%22%3Bi(t.jqId).show()%2Ci(%22%23dialog%20%22%2Bt.jqId%2B%22%20pre%22).first().html(e)%2Ci(%22%23dialog%22).on(%22click%22%2Ct.jqId%2B%22%20button%22%2Cfunction()%7Bvar%20t%3D%24(%22pre%22%2C%24(this).parent()).text()%2Ce%3D%24(%22%3Ctextarea%3E%22)%3Bi(%22body%22).append(e)%2Ce.val(t).select()%2Cdocument.execCommand(%22copy%22)%2Ce.remove()%7D)%7D))%7D)%7D)%7D)%7Dvar%20e%3Ddocument.createElement(%22script%22)%3Be.addEventListener%3Fe.addEventListener(%22load%22%2Ct%2C!1)%3Ae.readyState%26%26(e.onreadystatechange%3Dt)%2Ce.src%3D%22https%3A%2F%2Fsdk.amazonaws.com%2Fjs%2Faws-sdk-2.663.0.min.js%22%2Cdocument.body.appendChild(e)%7Dvar%20e%3Ddocument.createElement(%22script%22)%3Be.addEventListener%3Fe.addEventListener(%22load%22%2Ct%2C!1)%3Ae.readyState%26%26(e.onreadystatechange%3Dt)%2Ce.src%3D%22https%3A%2F%2Fcode.jquery.com%2Fui%2F1.12.1%2Fjquery-ui.js%22%2Cdocument.body.appendChild(e)%7Dvar%20s%3Ddocument.createElement(%22script%22)%3Bs.addEventListener%3Fs.addEventListener(%22load%22%2Ccallback%2C!1)%3As.readyState%26%26(s.onreadystatechange%3Dcallback)%2Cs.src%3D%22https%3A%2F%2Fajax.googleapis.com%2Fajax%2Flibs%2Fjquery%2F3.5.1%2Fjquery.min.js%22%2Cdocument.body.appendChild(s)%3B%7D)()">AWS Temporary Credentials Bookmarklet</a>
      </p>
      
      <p class="dim">This page was created with the <a href="https://github.com/mrcoles/bookmarklet">bookmarklet</a> npm library.</p>
    </div>
  </body>
</html>

